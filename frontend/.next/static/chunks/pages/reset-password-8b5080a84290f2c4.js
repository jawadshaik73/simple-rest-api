(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6],{3219:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(4297);let r=(0,a.Z)("ArrowLeft",[["line",{x1:"19",x2:"5",y1:"12",y2:"12",key:"9fu2vq"}],["polyline",{points:"12 19 5 12 12 5",key:"1ksm0z"}]])},5977:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(4297);let r=(0,a.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9455:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(4297);let r=(0,a.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]])},1173:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/reset-password",function(){return t(9378)}])},7435:function(e,s,t){"use strict";var a=t(5893);t(7294);var r=t(1664),n=t.n(r),l=t(1144),i=t(1862),o=t(4933),d=t(9483),c=t(8051),x=t(3495);s.Z=e=>{let{children:s}=e,{user:t,logout:r}=(0,l.a)();return(0,a.jsxs)("div",{className:"min-h-screen bg-slate-50 text-slate-900",children:[(0,a.jsx)("nav",{className:"glass sticky top-0 z-50 border-b border-slate-200",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16 items-center",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"premium-gradient p-2 rounded-lg text-white",children:(0,a.jsx)(i.Z,{size:24})}),(0,a.jsxs)(n(),{href:"/",className:"text-xl font-bold tracking-tight text-slate-800 hidden sm:block",children:["Task",(0,a.jsx)("span",{className:"text-indigo-600",children:"Master"})]})]}),(0,a.jsx)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-2 px-3 py-1 bg-slate-100 rounded-full text-sm font-medium border border-slate-200",children:[(0,a.jsx)(o.Z,{size:14,className:"text-indigo-600"}),(0,a.jsx)("span",{className:"text-slate-600",children:t.email}),"admin"===t.role&&(0,a.jsx)("span",{className:"bg-amber-100 text-amber-800 px-2 py-0.5 rounded text-[10px] uppercase font-bold border border-amber-200",children:"Admin"})]}),(0,a.jsxs)(n(),{href:"/dashboard",className:"flex items-center space-x-1 px-3 py-2 text-sm font-medium text-slate-600 hover:text-indigo-600 transition-colors",children:[(0,a.jsx)(d.Z,{size:18}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Dashboard"})]}),(0,a.jsxs)("button",{onClick:r,className:"flex items-center space-x-1 px-4 py-2 rounded-xl text-sm font-semibold text-white premium-gradient premium-shadow hover:opacity-90 transition-all active:scale-95",children:[(0,a.jsx)(c.Z,{size:16}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Logout"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n(),{href:"/login",className:"text-sm font-semibold text-slate-600 hover:text-indigo-600 px-4 py-2 transition-colors",children:"Log in"}),(0,a.jsx)(n(),{href:"/register",className:"flex items-center space-x-1 px-5 py-2.5 rounded-xl text-sm font-bold text-white premium-gradient premium-shadow hover:opacity-90 transition-all active:scale-95",children:(0,a.jsx)("span",{children:"Get Started"})})]})})]})})}),(0,a.jsx)("main",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:(0,a.jsx)(x.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:s})}),(0,a.jsxs)("footer",{className:"mt-auto py-8 text-center text-slate-400 text-sm border-t border-slate-100",children:["\xa9 ",new Date().getFullYear()," TaskMaster Pro. Built for Performance."]})]})}},9378:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return ResetPassword}});var a=t(5893),r=t(7294),n=t(7536),l=t(7435),i=t(1664),o=t.n(i),d=t(3495),c=t(3219),x=t(9455),m=t(5977),u=t(3217),p=t(6501),h=t(1163),f=t(7066);function ResetPassword(){let[e,s]=(0,r.useState)(!1),[t,i]=(0,r.useState)(""),[b,w]=(0,r.useState)(""),[j,N]=(0,r.useState)(!1),{register:v,handleSubmit:g,watch:y,formState:{errors:P},setValue:Z}=(0,n.cI)(),k=(0,h.useRouter)();(0,r.useEffect)(()=>{let{token:e,email:s,method:t}=k.query;e&&s&&(i(s),w(e),N(!0))},[k.query]);let onSubmit=async e=>{s(!0);try{let s={newPassword:e.newPassword};if(j)s.token=b,s.email=t;else{if(!e.code){p.ZP.error("Please enter the reset code");return}s.code=e.code}await f.Z.post("".concat("http://localhost:5000/api/v1","/auth/reset-password"),s),p.ZP.success("Password reset successful! Redirecting to login..."),setTimeout(()=>{k.push("/login")},2e3)}catch(e){var a,r;console.error("Reset error:",e),p.ZP.error((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to reset password")}finally{s(!1)}};return(0,a.jsx)(l.Z,{children:(0,a.jsx)("div",{className:"max-w-md mx-auto pt-10",children:(0,a.jsxs)(d.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-white p-8 sm:p-10 rounded-[2.5rem] shadow-2xl shadow-slate-200 border border-slate-100",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)(o(),{href:"/login",className:"inline-flex items-center text-sm font-bold text-slate-400 hover:text-slate-600 transition-colors mb-6",children:[(0,a.jsx)(c.Z,{size:16,className:"mr-1"}),"Back to Login"]}),(0,a.jsxs)("div",{className:"flex items-center mb-4",children:[(0,a.jsx)(x.Z,{className:"text-indigo-500 mr-3",size:32}),(0,a.jsx)("h2",{className:"text-3xl font-black text-slate-800 tracking-tight",children:"Reset Password"})]}),(0,a.jsx)("p",{className:"text-slate-400 mt-2 font-medium",children:j?"Create a new password for your account":"Enter the reset code and create a new password"})]}),(0,a.jsxs)("form",{onSubmit:g(onSubmit),className:"space-y-6",children:[!j&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-bold text-slate-600 ml-1",children:"Reset Code"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-400",children:(0,a.jsx)(x.Z,{size:20})}),(0,a.jsx)("input",{type:"text",...v("code",{required:"Reset code is required",pattern:{value:/^\d{6}$/,message:"Code must be 6 digits"}}),placeholder:"123456",className:"w-full pl-12 pr-4 py-4 bg-slate-50 border-2 rounded-2xl outline-none transition-all ".concat(P.code?"border-rose-100 focus:border-rose-500":"border-transparent focus:border-indigo-500")})]}),P.code&&(0,a.jsx)("p",{className:"text-rose-500 text-xs font-bold mt-1 ml-1",children:P.code.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-bold text-slate-600 ml-1",children:"New Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-400",children:(0,a.jsx)(m.Z,{size:20})}),(0,a.jsx)("input",{type:"password",...v("newPassword",{required:"New password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),placeholder:"••••••••",className:"w-full pl-12 pr-4 py-4 bg-slate-50 border-2 rounded-2xl outline-none transition-all ".concat(P.newPassword?"border-rose-100 focus:border-rose-500":"border-transparent focus:border-indigo-500")})]}),P.newPassword&&(0,a.jsx)("p",{className:"text-rose-500 text-xs font-bold mt-1 ml-1",children:P.newPassword.message})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-bold text-slate-600 ml-1",children:"Confirm New Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-slate-400",children:(0,a.jsx)(m.Z,{size:20})}),(0,a.jsx)("input",{type:"password",...v("confirmPassword",{required:"Please confirm your password",validate:e=>e===y("newPassword")||"Passwords do not match"}),placeholder:"••••••••",className:"w-full pl-12 pr-4 py-4 bg-slate-50 border-2 rounded-2xl outline-none transition-all ".concat(P.confirmPassword?"border-rose-100 focus:border-rose-500":"border-transparent focus:border-indigo-500")})]}),P.confirmPassword&&(0,a.jsx)("p",{className:"text-rose-500 text-xs font-bold mt-1 ml-1",children:P.confirmPassword.message})]}),(0,a.jsx)("button",{type:"submit",disabled:e,className:"w-full h-14 flex items-center justify-center space-x-2 rounded-2xl text-white font-bold premium-gradient premium-shadow hover:opacity-90 disabled:opacity-50 transition-all active:scale-95 mt-8",children:e?(0,a.jsx)(u.Z,{className:"animate-spin",size:20}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Z,{size:20}),(0,a.jsx)("span",{children:"Reset Password"})]})})]}),(0,a.jsx)("div",{className:"mt-8 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-slate-500",children:["Didn't receive a code?"," ",(0,a.jsx)(o(),{href:"/forgot-password",className:"text-indigo-600 font-bold hover:underline",children:"Request again"})]})})]})})})}}},function(e){e.O(0,[182,992,774,888,179],function(){return e(e.s=1173)}),_N_E=e.O()}]);